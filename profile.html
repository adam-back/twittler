<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
  </head>
  <body>
    <p>Twittler</p>
    <p id='usename'></p>
    <button type="button" id="return">Return to Your Feed</button>
    <div class="display">
    </div>
    <script>

    var username= parent.document.URL.substring(parent.document.URL.indexOf('=') + 1, parent.document.URL.length);

//need to pull from streams.users.username instead of home.
//access object and cycle through tweets using key-in loop
    var userTweets = function() {
        var $div = $('.display');
          var index = streams.home.length - 1;
          while(index >= 0) {
            var tweet = streams.home[index];
            if(tweet.user == username) {
              var $tweet = $('<div id="message"></div>');
              var $label = $('<button id="label"></button>');
              var $time = $('<div id="time"></div>');
              $label.text('@' + tweet.user + ':').appendTo($div);
              $tweet.text(tweet.message).appendTo($div);
              $time.text(tweet.created_at.toLocaleTimeString()).appendTo($div);
              index--;
            } else {
              index--;
            }
          }
      };

      $(document).ready(function() {
        $("#username").text(username);

        userTweets();

        $('button').on('click', function() {
          window.location.href = "index.html";
        });
      });

      </script>
  </body>
</html>
